{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="container my-5">
    <h1 class="text-center fw-bold display-6" 
        style="color:#443627; text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);">
        üè¨ ‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
    </h1>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <div class="text-end my-3">
        <a href="{% url 'computerCreate' %}" class="btn btn-primary btn-lg shadow">
            ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        </a>
    </div>

    <table class="table table-bordered table-hover table-striped stock-table mt-4">
        <thead>
            <tr>
                <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå</th>
                <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th>‡∏™‡∏ï‡πä‡∏≠‡∏Å</th>
                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
        </thead>
        <tbody>
            {% for computer in computers %}
            <tr>
                <td>{{ computer.name }}</td>
                <td>{{ computer.brand }}</td>
                <td>‡∏ø {{ computer.price }}</td>
                <td class="{% if computer.stock > 10 %}status-available{% else %}status-low{% endif %} text-center">
                    {{ computer.stock }}
                    {% if computer.stock >= 10 %}
                        ‚úÖ
                    {% else %}
                        ‚ö†Ô∏è
                    {% endif %}
                </td>
                <td>{{ computer.category }}</td>
                <td class="text-center">
                    <img src="/{{ computer.images }}" class="img-thumbnail shadow-sm" 
                        style="width: 120px; height: 120px; object-fit: cover;">
                </td>
                <td class="text-center">
                    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
                    <a href="{% url 'computerOne' computer.cid %}" class="btn btn-warning btn-sm">
                        ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                    </a>
                    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö -->
                    <a href="{% url 'computerDelete' computer.cid %}" class="btn btn-danger btn-sm delete-btn">
                        üóëÔ∏è ‡∏•‡∏ö
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .stock-table {
        background-color: #FFF5E1;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }
    .stock-table th {
        background-color: #6D4C41;
        color: #FFF8E1;
        text-align: center;
    }
    .stock-table td {
        vertical-align: middle;
    }
    .status-available {
        color: green;
        font-weight: bold;
    }
    .status-low {
        color: orange;
        font-weight: bold;
    }
</style>

<script>
    // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
    document.querySelectorAll(".delete-btn").forEach(button => {
        button.addEventListener("click", function(event) {
            event.preventDefault();
            let confirmDelete = confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?");
            if (confirmDelete) {
                window.location.href = this.href;
            }
        });
    });
</script>

{% endblock %}
